# Active Polymer Worms Visualization

[![Streamlit App](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://active-polymer-worms-viz.streamlit.app)
[![GitHub](https://img.shields.io/badge/GitHub-Repository-blue?logo=github)](https://github.com/Mainv4/active-polymer-worms-viz/)

Interactive web application for exploring active polymer simulation data (N=40 beads). Visualize observables from free space and confinement experiments with advanced filtering, color mapping, and experimental data overlay.

**[Launch the app →](https://active-polymer-worms-viz.streamlit.app)**

## Installation

Install the required dependencies:

```bash
cd active-polymer-worms-viz
pip install -r requirements.txt
```

## Usage

Launch the application:

```bash
streamlit run app.py
```

The application will open automatically in your browser at http://localhost:8501

## Features

### Data Source Selection
- Choose between **Free Space** (H_free base) or **Confinement** (H_conf base) reference datasets
- Fuzzy matching (tolerance=0.05) to maximize data coverage for selected observables

### Advanced Filtering
- Dual-mode filtering: Range sliders + discrete value selection
- Filter by Péclet number (Pe), temperature (T), and bending rigidity (κ)
- Option to exclude rows containing NaN values
- Real-time display of filtered point count

### Interactive Plotting
- Select variables for X-axis, Y-axis, color mapping, and point size
- **Line connections**: Connect points sharing the same Pe, T, or κ value
- Interactive Plotly charts with zoom, pan, and hover functionality
- Choice of 6 color scales (Viridis, Plasma, Inferno, Magma, Cividis, Turbo)
- Optional logarithmic scaling for X and Y axes
- **Experimental data overlay**: Display experimental measurements as colored stars
  - :blue_circle: 10°C | :green_circle: 20°C | :red_circle: 30°C

### Data Table
- Filtered data table display
- Toggle between showing selected columns or all columns
- CSV export of filtered data

## Data Source

The application reads data from two CSV files generated by the `compile_all_data.py` script. These files aggregate observables from multiple simulation datasets using different reference bases:

### Available Datasets

**1. `data_freespace.csv` (Free Space Reference)**
- **Reference base**: H_free (Shannon entropy in free space)
- All other observables are fuzzy-matched to H_free parameters (tolerance=0.05 on Pe, T, κ)

**2. `data_confinement.csv` (Confinement Reference)**
- **Reference base**: H_conf (Shannon entropy in confinement, cavity only)
- All other observables are fuzzy-matched to H_conf parameters (tolerance=0.05 on Pe, T, κ)

### Observable Columns

Both datasets contain the same columns:

**Free space observables:**
- **H_free**: Shannon entropy
- **lp_free**: Persistence length from averaged correlation (normalized by contour length)
- **lp_free_individual**: Persistence length from individual polymer average (normalized by contour length)
- **tau_decorr**: End-to-end vector decorrelation time (seconds)
- **D_long**: Long-time diffusion coefficient (mm²/s)

**Confinement observables (cavity only):**
- **H_conf**: Shannon entropy
- **lp_conf**: Persistence length from averaged correlation (normalized by contour length)
- **lp_conf_individual**: Persistence length from individual polymer average (normalized by contour length)
- **ttrap**: Mean trapping time (minutes)

**Experimental data:**
- **data_exp.csv**: Experimental measurements at 10°C, 20°C, and 30°C
- Displayed as colored stars on plots when applicable variables are selected

### Fuzzy Matching Methodology

When an observable is unavailable for a given (Pe, T, κ) combination, the script searches for the closest match within a tolerance of 0.05 for each parameter. This allows combining data from simulations with slightly different parameters.

**Example**: When using `data_freespace.csv`, all rows have H_free values (reference base), while H_conf, lp_conf, and ttrap may have NaN values if no matching confinement data exists within the tolerance.

### Choosing the Right Dataset

- **ttrap vs lp_conf**: Use `data_confinement.csv` for maximum data points
- **H_free vs lp_free**: Use `data_freespace.csv` for maximum data points
- **Mixed correlations** (e.g., H_free vs ttrap): Either dataset works, choose based on which observable you want complete coverage for

## Data Generation

To regenerate the compiled data files, run from the parent directory:

```bash
python3 compile_all_data.py
```

This will create/update both:
- `active-polymer-worms-viz/data_freespace.csv` (H_free reference base)
- `active-polymer-worms-viz/data_confinement.csv` (H_conf reference base)
